# 百度历史街景爬虫

本文件夹包含专门用于获取百度历史街景图片的爬虫工具，支持批量下载指定坐标点的历史街景数据。

## 📁 文件结构

```
历史街景爬虫/
├── README.md                           # 本说明文档
├── 全量历史街景爬虫.py                 # 全量历史街景爬虫（下载所有历史年份）
├── 指定年份历史街景爬虫.py              # 指定年份历史街景爬虫
├── 示例数据/
│   ├── example.csv                    # 小规模示例坐标数据
│   └── 100m间隔点坐标xy.csv           # 大规模采样点坐标数据
└── 输出结果/                          # 下载的街景图片存储目录
```

## 🚀 功能特点

### 1. 全量历史街景爬虫 (`全量历史街景爬虫.py`)

**特点：**
- 自动获取并下载指定坐标点的**所有历史年份**街景图片
- 跳过当前年份，专注于历史数据
- 适合历史变迁分析和城市发展研究

**使用场景：**
- 城市发展变化对比研究
- 需要完整历史数据的学术研究
- 小规模、高质量的数据采集

**输出格式：**
```
街景图片/
└── all_historical_views/
    ├── 00000_2013.jpg
    ├── 00000_2015.jpg
    ├── 00000_2017.jpg
    └── 00000_2019.jpg
```

### 2. 指定年份历史街景爬虫 (`指定年份历史街景爬虫.py`)

**特点：**
- 可以指定具体年份下载街景图片
- 支持批量处理大规模坐标点
- 效率更高，适合大规模数据采集

**使用场景：**
- 特定时期的城市状态分析
- 大规模历史数据采集
- 需要精确控制下载年份的场景

**输出格式：**
```
街景图片/
└── street_view_2019/  # 按年份分目录
    ├── 00000.jpg
    ├── 00001.jpg
    └── 00002.jpg
```

## 📊 示例数据说明

### `example.csv`
- 包含5个示例坐标点
- 适合测试和演示
- 格式：WGS84坐标系，包含X（经度）和Y（纬度）列

### `100m间隔点坐标xy.csv`
- 包含11,109个100米间隔的采样点
- 适合大规模数据采集
- 覆盖较大地理区域

## 🛠️ 使用方法

### 环境要求
```bash
pip install pandas pillow requests
```

### 1. 全量历史街景下载
```python
from 全量历史街景爬虫 import baiduAllHistoricalImgDownloader

# 下载所有历史年份的街景图片
baiduAllHistoricalImgDownloader(
    pointsCsvPath="示例数据/example.csv",  # 坐标文件路径
    toFolderPath="街景图片",              # 保存目录
    ak="你的百度API密钥",                 # 百度地图API密钥
    zoom=3                               # 缩放级别
)
```

### 2. 指定年份历史街景下载
```python
from 指定年份历史街景爬虫 import baiduHistoricalImgDownloader

# 下载2019年的街景图片
baiduHistoricalImgDownloader(
    pointsCsvPath="示例数据/example.csv",  # 坐标文件路径
    toFolderPath="街景图片",              # 保存目录
    ak="你的百度API密钥",                 # 百度地图API密钥
    zoom=3,                              # 缩放级别
    year="2019"                          # 指定年份
)
```

## ⚙️ 参数说明

| 参数 | 说明 | 可选值 |
|------|------|--------|
| `pointsCsvPath` | WGS84坐标点CSV文件路径 | 必需 |
| `toFolderPath` | 图片保存文件夹路径 | 必需 |
| `ak` | 百度地图API密钥 | 必需 |
| `zoom` | 图片缩放级别 | 1-4 |
| `year` | 指定下载年份 | 如"2013"、"2019"等 |

### 缩放级别说明
| zoom | 图片尺寸 | 说明 |
|------|----------|------|
| 1 | 512×256 | 低分辨率 |
| 2 | 1024×512 | 中等分辨率 |
| 3 | 2048×1024 | 高分辨率（推荐） |
| 4 | 4096×2048 | 超高分辨率 |

## 📝 注意事项

1. **API密钥**：需要有效的百度地图API密钥
2. **请求频率**：代码已内置延时机制，避免请求过于频繁
3. **数据量**：大规模下载可能需要较长时间
4. **存储空间**：高分辨率图片占用存储空间较大
5. **网络稳定**：建议在网络稳定的环境下运行

## 🔧 技术路线

```
WGS84坐标点 → BD09MC坐标转换 → 获取街景ID → 获取历史时间线 → 下载历史图片 → 图片拼接 → 保存结果
```

## 📞 技术支持

如有问题或建议，请参考主项目的README.md文档或提交Issue。

## ⚖️ 免责声明

本项目仅供学习和研究使用，请遵守相关法律法规和百度地图API使用条款。使用者需自行承担使用风险。
